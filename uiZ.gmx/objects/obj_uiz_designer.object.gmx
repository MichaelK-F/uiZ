<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-9000</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if SECUREMODE!=false then{show_message(
"SECUREMODE set to true.
Securemode is a measurement that prevents any scripts dealing with external files or system commands to be disabled.
The designer is unusable without securemode set to 0 (false).
Please go to your macro settings and set SECUREMODE to 0."
)
game_end()}
uiz_init()
uiz_c(obj_uiz_des_dummy)
///set the loading screen
draw_set_font(uiz_fnt_dp_15)
//create frame
var c=obj_uiZ_controller.id;
loadingf=uiz_frame_create()
loadingf.width=min(uiz_getposx_simple(10,dp),c.width)
loadingf.height=min(uiz_getposy_simple(6,dp),c.height)
uiz_setwindowsize(loadingf.width,loadingf.height)
loadingf.posinframex=uiz_center
loadingf.posinframey=uiz_center
uiz_fixframepos(loadingf)
startgradient=instance_create(0,0,obj_uiZ_gradientroundrect)
uiz_setparent(startgradient,loadingf)
startgradient.posinframex=uiz_fill
startgradient.posinframey=uiz_fill
startgradient.color1=c_white
startgradient.color2=c_ltgray
startgradient.outline=0
startgradient.depth=5
uiz_fixgeneralpos(startgradient)
logosprite=instance_create(0,0,obj_uiZ_drawsprite)
logosprite.sprite=spr_uiz_designerlogo;
lsv=sprite_get_width(spr_uiz_designerlogo)/sprite_get_height(spr_uiz_designerlogo)
uiz_setparent(logosprite,loadingf)
logosprite.width=loadingf.width/2
logosprite.height=loadingf.width/2/lsv
logosprite.posinframex=uiz_center
logosprite.posinframey=fc
logosprite.setpointy=uiz_middle
logosprite.posvaly=0.25
logosprite.depth=-5
uiz_fixgeneralpos(logosprite)

loadcirc=instance_create(0,0,obj_uiZ_drawloadingcirc)
uiz_setparent(loadcirc,loadingf)
loadcirc.width=50
loadcirc.height=50
loadcirc.posinframex=uiz_center
loadcirc.posinframey=fc
loadcirc.setpointy=uiz_middle
loadcirc.posvaly=0.70
loadcirc.depth=-5 
uiz_fixgeneralpos(loadcirc)

loadfilelist=-1;
filelist=-1
aflist=-1
afobjlist=-1
afnamelist=-1
afsprlist=-1
afimglist=-1
spritelist=-1;
fontlist=-1;
postypelist=-1
postypelistlink=-1
uiznewdeslist=-1
uiznewversionlist=-1
uizchangedfilelist=-1
arm3listcount=-1
backupscreenopen=0
projectname=""
backupfolder=""
lastfheight=0;

vartext=""
setwritestring=""
saveonexit=0;
//room_speed=120
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///create the error textobject
error="0"
errtxt=instance_create(0,0,obj_uiZ_drawtext)
uiz_setparent(errtxt,loadingf)
errtxt.posinframex=fc
errtxt.setpointx=uiz_middle
errtxt.posvalx=0.5;
errtxt.posinframey=px
errtxt.posvaly=loadcirc.ly+15
errtxt.text="loading..."
errtxt.depth=-5
//errtxt.setpointy=uiz_
uiz_fixgeneralpos(errtxt)
filelist=-1
alarm[7]=1
//alarm[0]=1
runnormalstep=0
global.haswindow=0;
global.windowexists=-1;
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>global.newparentlist=ds_list_create();
global.newparentnamelist=ds_list_create();
global.texconstantlist=ds_list_create();
global.texconstantnamelist=ds_list_create();
global.xyconstantlist=ds_list_create();
global.xyconstantnamelist=ds_list_create();
global.xyconstantstringlist=ds_list_create();
global.xconstantlist=ds_list_create();
global.xconstantnamelist=ds_list_create();
global.animconstantlist=ds_list_create();
global.animconstantnamelist=ds_list_create();
global.yconstantlist=ds_list_create();
global.yconstantnamelist=ds_list_create();
global.fyconstantlist=ds_list_create();
global.fyconstantnamelist=ds_list_create();
global.fxconstantlist=ds_list_create();
global.fxconstantnamelist=ds_list_create();
global.xcenterconstantlist=ds_list_create();
global.xcenterconstantnamelist=ds_list_create();
global.ycenterconstantlist=ds_list_create();
global.ycenterconstantnamelist=ds_list_create();
global.texscriptconstantlist=ds_list_create();
global.texscriptconstantnamelist=ds_list_create();

global.loadingobjects=1;
uiz_findfile_init();
uiz_xml_init();
uiz_executecmdinit();
//global.xml=uiz_xml_createfile();
ds_list_add(global.xconstantnamelist,"pixels","dpi","factor","Y-factor","XY-factor","snap right",  "snap left", "center",  "fill")
ds_list_add(global.xconstantlist,     px,      dp,   fc,      fcy,       fcm,        uiz_snapright,uiz_snapleft,uiz_center,uiz_fill)
ds_list_add(global.yconstantnamelist,"pixels","dpi","factor","X-factor","XY-factor","snap top",  "snap bottom", "center",  "fill")
ds_list_add(global.yconstantlist,     px,      dp,   fc,      fcx,       fcm,        uiz_snaptop,uiz_snapbottom,uiz_center,uiz_fill)
ds_list_add(global.fyconstantnamelist,"pixels","dpi","factor","X-factor","extra")
ds_list_add(global.fyconstantlist,     px,      dp,   fc,      fcx,       xtra)
ds_list_add(global.fxconstantnamelist,"pixels","dpi","factor","Y-factor","extra")
ds_list_add(global.fxconstantlist,     px,      dp,   fc,      fcy,       xtra)
ds_list_add(global.xyconstantnamelist,"pixels","dpi","factor")
ds_list_add(global.xyconstantlist,     px,      dp,   fc)
ds_list_add(global.xyconstantstringlist,     "px",      "dp",   "fc")

ds_list_add(global.xcenterconstantnamelist,"auto","middle","left","right")
ds_list_add(global.xcenterconstantlist, uiz_auto, uiz_middle, uiz_left, uiz_right)
ds_list_add(global.ycenterconstantnamelist,"auto","middle","top","bottom")
ds_list_add(global.ycenterconstantlist, uiz_auto, uiz_middle, uiz_top, uiz_bottom)

ds_list_add(global.animconstantnamelist,"straight/linear",  "quadratic in",   "quadratic out",  "quadratic inout",  "quadratic outin", "sin in", "sin out",     "sin inout",    "sin  outin", "exponential in", "exponential out", "exponential inout")
ds_list_add(global.animconstantlist,     uiz_straight,      uiz_quadratic_in,uiz_quadratic_out,uiz_quadratic_inout,uiz_quadratic_outin,uiz_sin_in,uiz_sin_out,uiz_sin_inout,uiz_sin_outin,uiz_exponential_in,uiz_exponential_out,uiz_exponential_inout)
ds_list_add(global.animconstantnamelist,"exponential outin", "circular in", "circular out", "circular inout", "circular outin",  "cubic ",  "cubic out",         "cubic intout",  "cubic outin", "smoothstep","spring","accelerate decelerate")
ds_list_add(global.animconstantlist,uiz_exponential_outin,uiz_circular_in,uiz_circular_out,uiz_circular_inout,uiz_circular_outin,uiz_cubic_in,uiz_cubic_out,uiz_cubic_inout,uiz_cubic_outin,uiz_smoothstep,uiz_spring,uiz_acceldecel)
ds_list_add(global.animconstantnamelist,"bounce in","bounce out"  ,"bounce inout"     ,"bounce outin","anticipate in","anticipate out","anticipate inout"   ,"anticipate outin",    "wigle","elastic in"    ,"elastic out","elastic inout","elastic outin",     "one",  "zero")
ds_list_add(global.animconstantlist,uiz_bounce_in,uiz_bounce_out,uiz_bounce_inout,uiz_bounce_outin,uiz_anticipate_in,uiz_anticipate_out,uiz_anticipate_inout,uiz_anticipate_outin,uiz_wigle,uiz_elastic_in,uiz_elastic_out,uiz_elastic_inout,uiz_elastic_outin,uiz_one,uiz_zero)

ds_list_add(global.texconstantnamelist,"default","fill",              "tile",                "tilefit")
ds_list_add(global.texconstantlist,    -1,      uiz_texturemode_fill,uiz_texturemode_tile,uiz_texturemode_tilefit)

ds_list_add(global.texscriptconstantnamelist,"none",    "square",              "spritestitch","circlestitch",           "4way"              ,"4way+")
ds_list_add(global.texscriptconstantlist,    -1,      uiz_back_square,uiz_back_spritestitch,uiz_back_circlestitch,uiz_back_spritestitch_4way,uiz_back_spritestitch_4way_plus)

viewtypelist=ds_list_create()
ds_list_add(viewtypelist,"real","template","both")
viewmenu=0;
runpop=0;
newfilepopup=0;
global.isbeingcreated=0
//global.xmlbelongsto=0
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>uiz_designerend()
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="9">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///setup the loading screen
var err=0;
if loadfile="" or uiz_fileexists(projectfolder+"uiZ\"+loadfile)=0 then{
//call loading menu
uiz_des_func_load()
err=1;
}
if err=0 then{
sdbm("[uiZ,Designer:INFO] coping: "+string(projectfolder+"uiZ\"+loadfile)+" to: uizdata.ini")
file_delete("uizdata.ini")
directory_destroy("data")
//dbm(game_save_id)
uiz_copyfilewin(projectfolder+"uiZ\"+loadfile,game_save_id+"\uizdata.ini")

//make folder
for(var i=string_length(loadfile);i&gt;=0;i--){
if i=0 then{
//failed to find project folder, trow error
loadfolder=""
}else{
if string_char_at(loadfile,i)="." then{
loadfolder=string_copy(loadfile,1,i-1)+"_datafiles"
//dbm(loadfolder)
//gmxfile=string_copy(projectfile,i+1,string_length(projectfile))
break;}
}
}

sdbm('robocopy "'+projectfolder+'uiZ\'+loadfile+'" "'+game_save_id+'\uiz_savefiles"  /purge /E /COPY:DAT')
uiz_executecmd('robocopy "'+projectfolder+'uiZ\'+loadfile+'" "'+game_save_id+'\uiz_savefiles"  /purge /E /COPY:DAT')

if !file_exists("uizdata.ini") then{err=2}
}



if err=0 then{alarm[0]=1;}else{
//alarm[7]=1;
errtxt.text="error occured in alarm 9: "+string(err);
uiz_fixgeneralpos(errtxt);

}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="8">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>global.loadingobjects=0;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="7">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//check and ask for files
var err=0;
ini_open("uizdatafile.ini")
projectfile=ini_read_string("project","gmxfile","")
loadfile=ini_read_string("project","loadfile","")
ini_close()

if projectfile="" then{
//dbm("projectfile testing")
runpop=1;
err=1;
pop=uiz_popup_ok("Uiz doesn't know which project you're working in.
After pressing 'ok', a window will appear in which you will need to select your "+game_project_name+".project.gmx file
Giving the wrong file may result in some errors or even loss or corruption of data.","project",0)
}else{
if uiz_fileexists(projectfile)=0 then{
err=2;
runpop=1;
pop=uiz_popup_ok("The given location '"+string(projectfile)+"' is a false location, or your files don't exist there anymore.
After pressing 'ok', a window will appear in which you will need to select your "+game_project_name+".project.gmx file
Giving the wrong file may result in some errors or even loss or corruption of data.","project",0)
}
//var gmx=
for(var i=string_length(projectfile);i&gt;=0;i--){
if i=0 then{
//failed to find project folder, trow error
projectfolder=""
}else{
if string_char_at(projectfile,i)="\" then{
projectfolder=string_copy(projectfile,0,i)
//gmxfile=string_copy(projectfile,i+1,string_length(projectfile))
break;}
}
}

//dbm(projectfolder)

}
if err=0 then{alarm[1]=1;}else{
//alarm[7]=1;
errtxt.text="error occured in alarm 7: "+string(err);
uiz_fixgeneralpos(errtxt);

}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="6">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>error=""
var file=projectname+".project.gmx";
errtxt.text="applying changes to XML file: "+file;
uiz_fixgeneralpos(errtxt)
var l=uizchangedfilelist
if ds_exists(l,ds_type_list) and !ds_list_empty(l) then{
if file_exists(file) then{
sz=ds_list_size(l)
uiz_xml_init()
var f=uiz_xml_loadfile(file)
//var f=uiz_xml_loadfile("omg.txt")

var tree,rtree,exists,lfile;

tree=uiz_xml_gettree(f,'assets/objects name="objects"/objects name="uiZ"/objects name="uiz_designer"/objects name="uiz_shadow"/')
var rtree=uiz_xml_gettree(f,'*/object/')
//check if tree exists
if uiz_xml_gethandle(f,tree)=-1 then{
//create tree
//dbm("creating folderstruct")
uiz_xml_createfolderstruct(f,tree)
}
for(var i=0;i&lt;sz;i++){
//for(var i=0;i&lt;l;i++){
//dbm(l[| i])
var rfile=string(l[| i])
if uiz_laststringchars(rfile,11)=".object.gmx" then{
lfile=uiz_fromlaststringchars(rfile,11)
//sdbm(lfile,"objects\"+lfile)
//exists=uiz_xml_gethandle_dataexists(f,rtree,"objects\obj_test")
exists=uiz_xml_gethandle_dataexists(f,rtree,"objects\"+lfile)
if exists=-1 then{
//write tag to file
//uiz_xml_writetag(f,tree,"object","objects\obj_test")
uiz_xml_writetag(f,tree,"object","objects\"+lfile)
}
//dbm(exists,"objects\"+lfile,uiz_xml_getdebugstring(rtree))
}else{
error+="#X3, the file '"+string(rfile)+"' is not of the right type, its: "+string(uiz_laststringchars(rfile,11))
}
}


//uiz_xml_savefile(f,"a.txt")
uiz_xml_savefile(f,file)
//dbm(f,uiz_xml_getdebugstringtotal(f))
//dbm(f,l)
uiz_xml_unloadtree(tree)
uiz_xml_unloadtree(rtree)
uiz_xml_unloadfile(f)
}else{
error="X2, file ("+file+") doesn't exist."
}
}else{
error="X1, list doesn't exist."
}
if error!="" then{
errtxt.text="an error occurred while applying changes to xml files: "+error
uiz_fixgeneralpos(errtxt)
alarm[6]=room_speed
}else{
//continue
//sdbm("executing alarm 5")
alarm[5]=1
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///add new files to projectfile
/*
readfile=file_text_open_read(gmxfile)
writefile=file_text_open_write(gmxfile)

//loop trough the write 

file_text_close(writefile)
file_text_close(readfile)
*/
runpop=2;
pop=uiz_popup_ok("New shadow objects have been generated.(refer to manual on what they are)
They will now be applied to your game maker project, but you'll need to take some extra steps.
Your backup settings should be right. If they are not, then do not continue with this process.
A secondary process will pop up which applies changes to your game maker project files.
It will require you to shut down game maker. On some versions of game maker however, forcing it to continue will cause GM to automatically load in the changes.
If your resource tree suddenly collapses while doing this, then it is reloading your project.
Please make sure the following information is correct:
project location: "+projectfile+"
project name: "+projectname+"
backup location: "+backupfolder+"
","changing your files",0)
ds_list_add(uizchangedfilelist,projectname+".project.gmx")
ds_list_add(uizchangedfilelist,"uizdesignerobjectdata.ini")
errtxt.text="Preparing for changes to project file"
uiz_fixgeneralpos(errtxt)
file_delete("uizdatafile.ini")
ini_open("uizdatafile.ini")
ini_write_string("project","path",uiz_findappdata())
ini_write_real("project","time",date_current_datetime())
ini_write_string("project","c",ds_list_write(uizchangedfilelist))
ini_write_string("project","gmx",projectfolder)
ini_write_string("project","name",projectname)
ini_write_string("project","gmxfile",projectfile)
ini_close()
//dbm(directory+"uizdatafile.ini",environment_get_variable("LOCALAPPDATA")+"\uizdatafile.ini")
uiz_copyfilewin(directory+"uizdatafile.ini",environment_get_variable("LOCALAPPDATA")+"\uizdatafile.ini")

//launch filecopier:
//uiz_executecmd()

//uiz_executecmd('"'+directory+"test.bat"+'"')
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///create the backup window
//do a check first
var needback=1;
if file_exists("fileinfo.ini") then{
ini_open("fileinfo.ini")
backupfolder=ini_read_string("backup","path","")
backupfolder=uiz_fixpath(backupfolder)
valid=uiz_checkpath(backupfolder,"An error occured with the backup path:")
if uiz_direxists(backupfolder)!=1 then{uiz_returnerror+="#Backup directory doesn't exist"; valid=0}
if valid=0 then{uiz_popup_ok(uiz_returnerror,"backuperror",1)}else{
//if a valid backup directory has been found, then continue loading
alarm[3]=1
needback=0
}
}
if needback=1 then{
//set text
backupscreenopen=1
errtxt.text="Forcing you to make a backup for your own sake."
uiz_fixgeneralpos(errtxt)

//create window
w=uiz_window_create(7,dp,4,dp)
//w.x=global.screenpxwidth/2
//w.y=global.screenpxheight
w.button_maximize=0;
w.button_minimize=0;
w.button_cross=0;
w.contain=3
w.windowtext="backup"
uiz_fixgeneralpos(w)
wf=w
t=instance_create(0,0,obj_uiZ_drawtextlines)
uiz_setparent(t,wf)
t.posinframex=fc
t.posinframey=uiz_top
t.posvalx=0.05
t.posvalw=0.90
t.posvalh=0.5
t.posvalhtype=fc
t.posvalwtype=fc
t.text="
You are required to make a backup. 
backups will be places in:  specified folder\"+projectname+"\"+string_copy(projectname,1,3)+"_day-month-year-hour-minutes-seconds. 
Some (external) drives or filesystem formats don't support long file name paths. 
If you think the path will get to long, please choose a shorter path. 
A full backup will be made now, and more will be made when making more changes to your project. 
Backup settings can be changed in the future.
this program might freeze during the copying. be patient and don't force close uiZ.
"
uiz_fixgeneralpos(t)

psel=instance_create(0,0,obj_uiZ_stringbox)
uiz_setparent(psel,wf)
psel.posinframex=fc
psel.posinframey=fc
psel.posvalw=0.75
psel.posvalh=0.1
psel.posvaly=0.5
psel.posvalx=0.05
psel.posvalwtype=fc
psel.posvalhtype=fc
uiz_fixgeneralpos(psel)
getp=instance_create(0,0,obj_uiZ_squarebutton)
uiz_setparent(getp,wf)
getp.posinframex=fc
getp.posinframey=fc
getp.posvalw=0.14
getp.posvalh=0.1
getp.posvaly=0.5
getp.posvalx=0.81
getp.posvalwtype=fc
getp.posvalhtype=fc
getp.text="..."
getp.outline=0
getp.color=c_aqua
getp.oncolor=16749590
getp.incolor=16728880
uiz_fixgeneralpos(getp)

door=instance_create(0,0,obj_uiZ_checkbox)
uiz_setparent(door,wf)
door.posinframex=fc
door.posinframey=fc
door.posvalw=0.1
door.posvalh=0.1
door.posvaly=0.65
door.posvalx=0.05
door.posvalwtype=fcy
door.posvalhtype=fc
door.value=1
uiz_fixgeneralpos(door)
doortext=instance_create(0,0,obj_uiZ_drawtextlines)
uiz_setparent(doortext,wf)
doortext.posinframex=fcy
doortext.posinframey=fc
doortext.posvalw=0.75
doortext.posvalh=0.20
doortext.posvaly=0.65
doortext.posvalx=0.25
doortext.posvalwtype=fc
doortext.posvalhtype=fc
doortext.text="backup other recources than only objects and scripts. (first time will always be a full backup)"
uiz_fixgeneralpos(doortext)

//bcn=instance_create(0,0,obj_uiZ_sprbutton)
bcn=uiz_easybutton_create(spr_uiz_bigbutton1_2)
//bcn.sprite=spr_uiz_bigbutton1_2
uiz_setparent(bcn,wf)
bcn.posinframey=fc
bcn.posvaly=0.95
bcn.setpointy=uiz_bottom
bcn.posinframex=fc
bcn.posvalx=0.95
bcn.setpointx=uiz_right
bcn.posvalw=0.2
bcn.posvalwtype=fc
bcn.posvalh=0.1
bcn.posvalhtype=fc
bcn.depth=-10
bcn.text="Backup"
uiz_fixgeneralpos(bcn)
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///update objects if needed
var varname,varvalue,vartype,vartext,writestring1,writestring2,sz;
if ds_exists(uiznewdeslist,ds_type_list) then{
sz=ds_list_size(uiznewdeslist)
arm3listcount++;
if sz&gt;0 and arm3listcount&lt;sz then{
//for(var i=0;i&lt;sz;i++){
if uiznewdeslist[| arm3listcount]="obj_uiZ_frameset" or uiznewdeslist[| arm3listcount]="obj_uiz_des_frameset" then{
errtxt.text="skipping creating desiger shadow for: "+uiznewdeslist[| arm3listcount]
}else{
errtxt.text="creating desiger shadow for: "+uiznewdeslist[| arm3listcount]
uiz_fixgeneralpos(errtxt)
var file=uiznewdeslist[| arm3listcount]+".object.gmx"


if file_exists(file) then{
of=file_text_open_read(file)

dsfile=uiz_des_getdesname(uiznewdeslist[| arm3listcount])+".object.gmx"
//sdbm()
ds_list_add(uizchangedfilelist,dsfile)
//open designer shadow file and write first parts to it
file_delete(dsfile)
if file_exists("uiz\designtemplate1") then{
file_copy("uiz\designtemplate1",dsfile)
}else{
errtxt.text="error occured, uiz\designtemplate1 doesn't exist. is it inside of the included files?"
uiz_fixgeneralpos(errtxt)
show_debug_message("[uiZ,Designer:ERROR] error occured, uiz\designtemplate1 doesn't exist. is it inside of the included files?")
exit;}
f=file_text_open_append(dsfile)

varname=""
varvalue=""
vartext=""
vartype=0
setwritestring=""
writestring1=""
writestring2=""
while(!file_text_eof(of)){
var rln=file_text_readln(of);
sdbm("readline",rln)
if rln="&lt;/string&gt;"+chr($0D)+chr($0A) then{
//show_debug_message(line+": &lt;/string&gt; found")
break;}
if string_count("=",rln)=1 and string_count("//",rln)&gt;=2 then{
//possible candidate found for designerdeclaration
stringl=string_length(rln)
var eqpos=0
var foundeq=0
var foundsl=0
var slpos=0
var pass=0
for(var e=1;e&lt;=stringl;e++){
var ca=string_char_at(rln,e)
if ca="=" then{
if e&gt;1 then{
foundeq=1
eqpos=e+1
varname=string_copy(rln,1,e-1)
pass++
//sdbm(varname)
}else{break;}
}
if ca="/" then{
if e&gt;3 and foundeq=1 and eqpos&gt;1 then{
foundsl++
switch(foundsl){
case 1:
varvalue=string_copy(rln,eqpos,e-eqpos)
pass++
//sdbm(varvalue)
break;
case 2:
var ca2=string_char_at(rln,e+1);
pass++
switch(ca2){
case "v":vartype=1;break;//value
case "s":vartype=2;break;//string
case "b":vartype=3;break;//bool
case "c":vartype=4;break;//color
case "o":vartype=5;break;//object
case "p":vartype=6;break;//sprite
case "t":vartype=7;break;//texturemode
case "f":vartype=8;break;//font
case "z":vartype=9;break;//sizetype
case "a":vartype=10;break//animation
case "i":vartype=11;break;//texturescript
default:vartype=0;break;
}
break;
case 4:
slpos=e+1
break;
case 5:
vartext=string_copy(rln,slpos,e-slpos)
pass++
//vartext=string_copy(rln,1,e)

break;
}
}else{break;}

}
}
if pass&gt;2 then{
//add variable

writestring0='case "'+varname+'": object.'+varname+'=wv;'+varname+'=wv; break;'
//writestring2=writestring2+'case "'+varname+'": o.'+varname+'=v; wv=v; break;'+chr($0D)+chr($0A);
setwritestring2='case "'+varname+'": o.'+varname+'=v; wv=v; break;'+chr($0D)+chr($0A);
//dbm("sws2 at 1",setwritestring2)
switch(vartype){
case 1: //v
writestring1=writestring1+varname+'box=uiz_des_addtolist_val("'+vartext+':","'+varname+'",'+string(varvalue)+')'+chr($0D)+chr($0A); break;
case 2: //s
writestring1=writestring1+varname+'box=uiz_des_addtolist_string("'+vartext+':","'+varname+'",'+string(varvalue)+')'+chr($0D)+chr($0A); break;
case 3: //b
writestring1=writestring1+varname+'box=uiz_des_addtolist_bool("'+vartext+':","'+varname+'",'+string(varvalue)+')'+chr($0D)+chr($0A); break;
case 4: //c
writestring1=writestring1+varname+'box=uiz_des_addtolist_color("'+vartext+':","'+varname+'",'+string(varvalue)+')'+chr($0D)+chr($0A); break;
case 5: //o
writestring1=writestring1+varname+'box=uiz_des_addtolist_object("'+vartext+':","'+varname+'",'+string(varvalue)+')'+chr($0D)+chr($0A); break;
case 6: //p
writestring1=writestring1+varname+'box=uiz_des_addtolist_sprite("'+vartext+':","'+varname+'","'+string(varvalue)+'")'+chr($0D)+chr($0A);
setwritestring2='case "'+varname+'": o.'+varname+'=asset_get_index(v); wv=v; break;'+chr($0D)+chr($0A);
writestring0='case "'+varname+'": object.'+varname+'=asset_get_index(wv);'+varname+'=wv; break;'
break;
case 7: //t
writestring1=writestring1+varname+'box=uiz_des_addtolist_list("'+vartext+':","'+varname+'",'+string(varvalue)+',global.texconstantlist,global.texconstantnamelist)'+chr($0D)+chr($0A);
setwritestring2='case "'+varname+'": o.'+varname+'=real(v); wv=u.selected; break;'+chr($0D)+chr($0A);
writestring0='case "'+varname+'": var k=global.texconstantlist[|wv]; if k=undefined then{k=o.defval} object.'+varname+'=k;'+varname+'=k; break;'
break;
case 8: //f
writestring1=writestring1+varname+'box=uiz_des_addtolist_font("'+vartext+':","'+varname+'","'+string(varvalue)+'")'+chr($0D)+chr($0A);
setwritestring2='case "'+varname+'": if v="none" then{o.'+varname+'=-1;}else{o.'+varname+'=asset_get_index(v);} wv=v; break;'+chr($0D)+chr($0A);
writestring0='case "'+varname+'": if wv="none" then{object.'+varname+'=-1;}else{object.'+varname+'=asset_get_index(wv);}'+varname+'=wv; break;'
break;
case 9: //z
writestring1=writestring1+varname+'box=uiz_des_addtolist_list("'+vartext+':","'+varname+'",'+string(varvalue)+',global.xyconstantlist,global.xyconstantnamelist,global.xyconstantstringlist)'+chr($0D)+chr($0A);
setwritestring2='case "'+varname+'": o.'+varname+'=real(v); wv=real(v); break;'+chr($0D)+chr($0A);
break;
case 10: //a
writestring1=writestring1+varname+'box=uiz_des_addtolist_list("'+vartext+':","'+varname+'",'+string(varvalue)+',global.animconstantlist,global.animconstantnamelist)'+chr($0D)+chr($0A);
setwritestring2='case "'+varname+'": o.'+varname+'=real(v); wv=u.selected; break;'+chr($0D)+chr($0A);
writestring0='case "'+varname+'": var k=global.animconstantlist[|wv]; if k=undefined then{k=o.defval} object.'+varname+'=k;'+varname+'=k; break;'
break;
case 11://i
writestring1=writestring1+varname+'box=uiz_des_addtolist_list("'+vartext+':","'+varname+'",'+string(varvalue)+',global.texscriptconstantlist,global.texscriptconstantnamelist,-global.texscriptconstantlist)'+chr($0D)+chr($0A);
setwritestring2='case "'+varname+'": o.'+varname+'=real(v); wv=u.selected; break;'+chr($0D)+chr($0A);
writestring0='case "'+varname+'": var k=global.texscriptconstantlist[|wv]; if k=undefined then{k=o.defval} object.'+varname+'=k;'+varname+'=k; break;'
break;
}
//dbm("sws2",setwritestring)
writestring2+=setwritestring2
file_text_write_string(f,writestring0)
file_text_writeln(f);
//writestring2=writestring2+'case "'+varname+'": o.'+varname+'=v; wv=v; break;'+chr($0D)+chr($0A);
}
}
}
//write the end of the design shadown

if file_exists("uiz\designtemplate2") then{
//file_copy("designtemplate1",dsfile)
var f1=file_text_open_read("uiz\designtemplate2")
}else{
errtxt.text="error occured, uiz\designtemplate2 doesn't exist. is it inside of the included files?"
uiz_fixgeneralpos(errtxt)
show_debug_message("[uiZ,Designer:ERROR] error occured, uiz\designtemplate2 doesn't exist. is it inside of the included files?")
exit;}
uiz_addfiletofile(f,f1)
file_text_close(f1)
//add writestring to file
file_text_write_string(f,writestring1)


//add other piece of file
if file_exists("uiz\designtemplate3") then{
//file_copy("designtemplate1",dsfile)
var f2=file_text_open_read("uiz\designtemplate3")
}else{
errtxt.text="error occured, uiz\designtemplate3 doesn't exist. is it inside of the included files?"
uiz_fixgeneralpos(errtxt)
show_debug_message("[uiZ,Designer:ERROR] error occured, uiz\designtemplate3 doesn't exist. is it inside of the included files?")
exit;}
uiz_addfiletofile(f,f2)
file_text_close(f2)
//add writestring to file
//dbm("ws2:",writestring2)
file_text_writeln(f)
file_text_write_string(f,writestring2)
//write other piece of file
if file_exists("uiz\designtemplate4") then{
//file_copy("designtemplate1",dsfile)
var f3=file_text_open_read("uiz\designtemplate4")
}else{
errtxt.text="error occured, uiz\designtemplate4 doesn't exist. is it inside of the included files?"
uiz_fixgeneralpos(errtxt)
show_debug_message("[uiZ,Designer:ERROR] error occured, uiz\designtemplate4 doesn't exist. is it inside of the included files?")
exit;}
uiz_addfiletofile(f,f3)
file_text_close(f3)
file_text_close(of)
file_text_close(f)


}
}
alarm[3]=1

}else{
//done creating shadow files
//sdbm("executing alarm 6")
alarm[6]=1
}
}else{
show_debug_message("[uiZ,Designer:ERROR] there is no uiznewdeslist! will continue to load, but errors can occur. ")
alarm[0]=1}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///F get a list of all files
objectlist=ds_list_create()
spritelist=ds_list_create()
fontlist=ds_list_create()
fontnamelist=ds_list_create()
ds_list_add(fontlist,"none")
ds_list_add(fontnamelist,"none")
uizlist=ds_list_create()
uizsprlist=ds_list_create()
uizimglist=ds_list_create()
uiznewdeslist=ds_list_create()
uiznewversionlist=ds_list_create()
uizchangedfilelist=ds_list_create()
//check if file exist first
if file_exists(gmxfile) then{
//start reading the main file
var f=file_text_open_read(gmxfile)
//var tf=file_text_open_write("a.txt")
file_delete("uizdesignerobjectdata.ini")
uiz_copyfilewin(projectfolder+"uizdesignerobjectdata.ini",game_save_id+"uizdesignerobjectdata.ini")
//dbm("copied ifle over",projectfolder+"uizdesignerobjectdata.ini",game_save_id+"uizdesignerobjectdata.ini")
ini_open("uizdesignerobjectdata.ini")
file_delete("newuizdesignerobjectdata.ini" )
file_copy("uizdesignerobjectdata.ini","newuizdesignerobjectdata.ini")
var line, of,doadd;
var linenumber=0
var readingobjects=0
var readingsprites=0;
var readingfonts=0;
while(!file_text_eof(f)){
linenumber++


line=file_text_readln(f)
//find first sprite line
if line='  &lt;sprites name="sprites"&gt;'+chr($0D)+chr($0A) then{
show_debug_message("[uiZ,Designer:INFO] spriteline found at: "+string(linenumber))
readingsprites=1
}
//find last sprite line
if line='  &lt;/sprites&gt;'+chr($0D)+chr($0A) then{
show_debug_message("[uiZ,Designer:INFO] spriteendline found at: "+string(linenumber))
readingsprites=0
}

if readingsprites=1 then{
//remove spaces in beginning
var chrcount=0;
while(string_char_at(line,chrcount)=" "){
chrcount++;
}
//line=string_copy(line,chrcount,string_length(line))

//check if there is a &lt;sprite&gt; tag in front
//show_debug_message(string_copy(line,chrcount,8))
//sdbm(string_copy(line,chrcount,8),string_copy(line,chrcount+16,string_length(line)-26-chrcount))
if string_copy(line,chrcount,8)="&lt;sprite&gt;" then{
line=string_copy(line,chrcount+16,string_length(line)-26-chrcount)
sdbm("[uiZ,Designer:INFO] sprite found:"+line)
ds_list_add(spritelist,line)
}

}












//find first font line
if line='  &lt;fonts name="fonts"&gt;'+chr($0D)+chr($0A) then{
show_debug_message("[uiZ,Designer:INFO] fontline found at: "+string(linenumber))
readingfonts=1
}
//find last font line
if line='  &lt;/fonts&gt;'+chr($0D)+chr($0A) then{
show_debug_message("[uiZ,Designer:INFO] fontendline found at: "+string(linenumber))
readingfonts=0
}

if readingfonts=1 then{
//remove spaces in beginning
var chrcount=0;
while(string_char_at(line,chrcount)=" "){
chrcount++;
}
//line=string_copy(line,chrcount,string_length(line))

//check if there is a &lt;sprite&gt; tag in front
//show_debug_message(string_copy(line,chrcount,8))
if string_copy(line,chrcount,6)="&lt;font&gt;" then{
//sdbm(string_copy(line,chrcount,6),string_copy(line,chrcount+14,string_length(line)-22-chrcount))
line=string_copy(line,chrcount+12,string_length(line)-20-chrcount)
sdbm("[uiZ,Designer:INFO] font found:"+line)
ds_list_add(fontlist,line)
}

}




















//line=file_text_readln(f)
//find first object line
if line='  &lt;objects name="objects"&gt;'+chr($0D)+chr($0A) then{
show_debug_message("[uiZ,Designer:INFO] objectline found at: "+string(linenumber))
readingobjects=1
}
//find last object line
if line='  &lt;/objects&gt;'+chr($0D)+chr($0A) then{
show_debug_message("[uiZ,Designer:INFO] objectendline found at: "+string(linenumber))
readingobjects=0
}
if readingobjects=1 then{
//remove spaces in beginning
var chrcount=0;
while(string_char_at(line,chrcount)=" "){
chrcount++;
}
//line=string_copy(line,chrcount,string_length(line))

//check if there is a &lt;object&gt; tag in front
//show_debug_message(string_copy(line,chrcount,8))
if string_copy(line,chrcount,8)="&lt;object&gt;" then{
chrcount+=8
line=string_copy(line,chrcount+8,string_length(line)-18-chrcount)
//check if object is a uiz object (check for ///define uiZ)
of=file_text_open_read(line+".object.gmx")
isuiz=0
while (!file_text_eof(of)){
if file_text_readln(of)="            &lt;string&gt;///#define uiZ"+chr($0D)+chr($0A) then{
isuiz=1
//var at=ds_list_size(uizsprlist)
var qusespr=spr_uiZ_images_user
var quseimg=0
//ds_list_add(uizsprlist,spr_uiZ_images)
//ds_list_add(uizimglist,0)
doadd=1
//usesprite=spr_uiZ_images_user
//useimage=0
var qobjversion=""
repeat(4){
var rln=file_text_readln(of);
if rln="//#sprite images"+chr($0D)+chr($0A) then{
qusespr=spr_uiZ_images;
//uizsprlist[| at]=spr_uiZ_images
}else{
if rln="//#sprite user"+chr($0D)+chr($0A) then{
qusespr=spr_uiZ_images_user;
//uizsprlist[| at]=spr_uiZ_images_user
}else{
if string_copy(rln,1,12)="//#spritenum" then{
quseimg=real(string_digits(rln))
//uizimglist[| at]=real(string_digits(rln))
}else{
if rln="//#exclude"+chr($0D)+chr($0A) then{
doadd=0
}else{
//if quseimg=6 then{dbm("objectversion!",rln,string_copy(rln,1,14),string_copy(rln,18,string_length(rln)-19))}
if string_copy(rln,1,16)="//#objectversion" then{
qobjversion=string_copy(rln,18,string_length(rln)-19)
//dbm(qobjversion)
//if qobjversion=ini_read_string("objectversion",line,"") and asset_get_index(uiz_des_getdesname(line))&gt;=0 then{//pass
var pass=1;
var desname=uiz_des_getdesname(line);
sdbm("checking objectversion: original: '"+string(qobjversion)+"' new: '"+string(ini_read_string("objectversion",line,""))+"'")
if asset_get_index(desname)&lt;=0 or file_exists(desname+".object.gmx")=0 or !(qobjversion=ini_read_string("objectversion",line,"")) then{
pass=0;
}
if desname="obj_uiZ_frameset" then{pass=1}
/*else{
if file_exists(desname+".object.gmx")=0 then{
pass=0;
}else{

if !qobjversion=ini_read_string("objectversion",line,"") then{pass=0;}
}
}
*/
//dbm(qobjversion,ini_read_string("objectversion",line,""),pass,asset_get_index(desname),file_exists(desname+".object.gmx"))
if pass=0 then{
//needs to be redefined
ds_list_add(uiznewdeslist,line)
ds_list_add(uiznewversionlist,qobjversion)
ini_open("newuizdesignerobjectdata.ini")
ini_write_string("objectversion",line,string(qobjversion))
ini_open("uizdesignerobjectdata.ini")
}
}else{
break;}
}
}
}
}
}
/*
var first=1
while(!file_text_eof(of)){
if first=0 then{
var rln=file_text_readln(of);
}else{first=0}
if rln="&lt;/string&gt;"+chr($0D)+chr($0A) then{
//show_debug_message(line+": &lt;/string&gt; found")
break;}
if string_count("=",rln)=1 and string_count("//",rln)&gt;=2 then{
//possible candidate found for designerdeclaration
stringl=string_length(rln)
for(var i=0;i&lt;=stringl;i++){

}
}
}//until(stop)*/
}
}
file_text_close(of)
if isuiz then{
ds_list_add(objectlist,line)
if doadd=1 then{
ds_list_add(uizlist,line)
ds_list_add(uizsprlist,qusespr)
ds_list_add(uizimglist,quseimg)
show_debug_message("[uiZ,Designer:INFO] "+line+": a uiZ object-"+string(qobjversion)+"-------------------------")
}else{
show_debug_message("[uiZ,Designer:INFO] "+line+": a uiZ object-"+string(qobjversion)+"-but excluded----")}
}else{
ds_list_add(objectlist,line)
show_debug_message("[uiZ,Designer:INFO] "+line)
}
}
}
}
file_text_close(f)
//file_text_close(tf)
ini_close()
file_delete("uizdesignerobjectdata.ini" )
ini_open("uizdesignerobjectdata.ini")
file_copy("newuizdesignerobjectdata.ini","uizdesignerobjectdata.ini")


}else{error="F6"}
if error!="0" then{
errtxt.text="an error occured while checking and copying files: "+error
uiz_fixgeneralpos(errtxt)
alarm[2]=3
//alarm[0]=3
uiz_destroydslist(uiznewdeslist)
uiz_destroydslist(uiznewversionlist)
}else{
//dbm(ds_list_size(uiznewdeslist))
if ds_list_size(uiznewdeslist)&gt;0 then{
sdbm("[uiZ,Designer:INFO] starting the creation process of shadow objects")
//alarm[0]=1
alarm[4]=1
}else{
//alarm[0]=1
alarm[9]=1;
}
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///F get a list of all files backup
/*
objectlist=ds_list_create()
uizlist=ds_list_create()
uizsprlist=ds_list_create()
uizimglist=ds_list_create()
uiznewdeslist=ds_list_create()
uiznewversionlist=ds_list_create()
uizchangedfilelist=ds_list_create()
//check if file exist first
if file_exists(gmxfile) then{
//start reading the main file
var f=file_text_open_read(gmxfile)
//var tf=file_text_open_write("a.txt")
ini_open("uizdesignerobjectdata.ini")
var line, of,doadd;
var linenumber=0
var readingobjects=0
while(!file_text_eof(f)){
linenumber++
line=file_text_readln(f)
//find first object line
if line='  &lt;objects name="objects"&gt;'+chr($0D)+chr($0A) then{
show_debug_message("[uiZ,Designer:INFO] objectline found at: "+string(linenumber))
readingobjects=1
}
//find last object line
if line='  &lt;/objects&gt;'+chr($0D)+chr($0A) then{
show_debug_message("[uiZ,Designer:INFO] objectendline found at: "+string(linenumber))
readingobjects=0
}
if readingobjects=1 then{
//remove spaces in beginning
var chrcount=0;
while(string_char_at(line,chrcount)=" "){
chrcount++;
}
//line=string_copy(line,chrcount,string_length(line))

//check if there is a &lt;object&gt; tag in front
//show_debug_message(string_copy(line,chrcount,8))
if string_copy(line,chrcount,8)="&lt;object&gt;" then{
chrcount+=8
line=string_copy(line,chrcount+8,string_length(line)-18-chrcount)
//check if object is a uiz object (check for ///define uiZ)
of=file_text_open_read(line+".object.gmx")
isuiz=0
while (!file_text_eof(of)){
if file_text_readln(of)="            &lt;string&gt;///#define uiZ"+chr($0D)+chr($0A) then{
isuiz=1
//var at=ds_list_size(uizsprlist)
var qusespr=spr_uiZ_images_user
var quseimg=0
//ds_list_add(uizsprlist,spr_uiZ_images)
//ds_list_add(uizimglist,0)
doadd=1
//usesprite=spr_uiZ_images_user
//useimage=0
var qobjversion=""
repeat(4){
var rln=file_text_readln(of);
if rln="//#sprite images"+chr($0D)+chr($0A) then{
qusespr=spr_uiZ_images;
//uizsprlist[| at]=spr_uiZ_images
}else{
if rln="//#sprite user"+chr($0D)+chr($0A) then{
qusespr=spr_uiZ_images_user;
//uizsprlist[| at]=spr_uiZ_images_user
}else{
if string_copy(rln,1,12)="//#spritenum" then{
quseimg=real(string_digits(rln))
//uizimglist[| at]=real(string_digits(rln))
}else{
if rln="//#exclude"+chr($0D)+chr($0A) then{
doadd=0
}else{
//if quseimg=6 then{dbm("objectversion!",rln,string_copy(rln,1,14),string_copy(rln,18,string_length(rln)-19))}
if string_copy(rln,1,16)="//#objectversion" then{
qobjversion=string_copy(rln,18,string_length(rln)-19)
//dbm(qobjversion)
if qobjversion=ini_read_string("objectversion",line,"") and asset_get_index(uiz_des_getdesname(line))&gt;=0 then{//pass
}else{
//needs to be redefined
ds_list_add(uiznewdeslist,line)
ds_list_add(uiznewversionlist,qobjversion)
}
}else{
break;}
}
}
}
}
}
/*
var first=1
while(!file_text_eof(of)){
if first=0 then{
var rln=file_text_readln(of);
}else{first=0}
if rln="&lt;/string&gt;"+chr($0D)+chr($0A) then{
//show_debug_message(line+": &lt;/string&gt; found")
break;}
if string_count("=",rln)=1 and string_count("//",rln)&gt;=2 then{
//possible candidate found for designerdeclaration
stringl=string_length(rln)
for(var i=0;i&lt;=stringl;i++){

}
}
}//until(stop)*//*
}
}
file_text_close(of)
if isuiz then{
ds_list_add(objectlist,line)
if doadd=1 then{
ds_list_add(uizlist,line)
ds_list_add(uizsprlist,qusespr)
ds_list_add(uizimglist,quseimg)
show_debug_message("[uiZ,Designer:INFO] "+line+": a uiZ object-"+string(qobjversion)+"-------------------------")
}else{
show_debug_message("[uiZ,Designer:INFO] "+line+": a uiZ object-"+string(qobjversion)+"-but excluded----")}
}else{
ds_list_add(objectlist,line)
show_debug_message("[uiZ,Designer:INFO] "+line)
}
}
}
}
file_text_close(f)
//file_text_close(tf)
ini_close()
}else{error="F6"}
if error!="0" then{
errtxt.text="an error occured while checking and copying files: "+error
uiz_fixgeneralpos(errtxt)
alarm[2]=3
//alarm[0]=3
uiz_destroydslist(uiznewdeslist)
uiz_destroydslist(uiznewversionlist)
}else{
if ds_list_size(uiznewdeslist)&gt;0 then{
alarm[0]=1
//alarm[4]=1
}else{
alarm[0]=1}
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///F check and copy files
errtxt.text="checking and copying files..."
uiz_fixgeneralpos(errtxt)

//error="F0";
//projectfile="G:\projects\appz\uiz\uiZ.gmx\uiZ.project.gmx"

//directory=working_directory
//dbm(uiz_findappdata()+"\")
//directory="C:\Users\Thomas\AppData\Local\uiZ\"
//directory=uiz_findappdata()+"\"
directory=uiz_findappdata()

for(var i=string_length(projectfile);i&gt;=0;i--){
if i=0 then{
//failed to find project folder, trow error
error="F1";
}else{
if string_char_at(projectfile,i)="\" then{
projectfolder=string_copy(projectfile,0,i)
gmxfile=string_copy(projectfile,i+1,string_length(projectfile))
break;}
}
}
//get projectname
projectname=string_copy(gmxfile,1,string_length(gmxfile)-12)
//dbm(projectname)
if error="0" then{
//uiz_executecmd("copy "+projectfile+" "+directory)
//uiz_executecmd("copy "+projectfolder+"objects\ "+directory)

uiz_executecmd('copy "'+projectfile+'" "'+directory+'"')
uiz_executecmd('copy "'+projectfolder+'objects\" "'+directory+'"')


//sdbm('robocopy "'+projectfolder+'uiz\" "'+directory+'uiz_savefiles\"  /purge /E /COPY:DAT')
//copy files
//var returncode=uiz_executecmd('robocopy "'+projectfolder+'uiz" "'+directory+'uiz_savefiles"  /purge /E /COPY:DAT');
//sdbm("[uiz:INFO] robocopy exited with code: "+string(returncode))
alarm[2]=3
//alarm[0]=3
}else{
errtxt.text="an error occured while checking and copying files: "+error
uiz_fixgeneralpos(errtxt)
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///init vars
global.loadingobjects=1;
alarm[8]=10
ini_open("uizdatafile.ini")
saveonexit=ini_read_real("setting","saveonexit",1)
ini_close()
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///setup frames
//destroy the ui
uiz_destroyobject(loadingf)
uiz_setwindowsize(display_get_width()*0.9,display_get_height()*0.9)
//uiz_window_center()
//window_set_position(0,0)

//create new ui
fset=uiz_frameset_create()
a=uiz_framedivisionhorizontal(fset,1,dp,1,xtra)
functionbar=a.frameat[0]
mainframe1=a.frameat[1]


b=uiz_framedivisionvertical(mainframe1,2.5,dp,1,xtra,2.5,dp,0.2,dp)
//b.minsizeinframeset=0.8
b.minsizeinframeset=0.1
b.minsizeinframesetvaltype=fc
leftbar=b.frameat[0]
mainframe2=b.frameat[1]
rightbar=b.frameat[2]
rightbar.minsizeinframeset=0.05
rightbar.minsizeinframesetvaltype=fc
rightbar.scrolly=true;
rightscrollbar=b.frameat[3]
rightscrollbar.framesetbar=false;

//create right frame
rightbarframe=uiz_c(obj_uiZ_frame);
uiz_setparent(rightbarframe,rightbar);
rightbarframe.posinframex=uiz_fill;
rightbarframe.posinframey=px;
rightbarframe.posvaly=0;
rightbarframe.posvalhtype=px;
rightbarframe.posvalh=50;

gridscrollbar=uiz_c(obj_uiZ_framescrollbar)
uiz_setparent(gridscrollbar,rightscrollbar)
gridscrollbar.posinframex=uiz_fill;
gridscrollbar.posinframey=uiz_fill;
gridscrollbar.frame=rightbar;
uiz_fixgeneralpos(gridscrollbar)

c=uiz_framedivisionhorizontal(leftbar,1,xtra,1,xtra)
c.framesetbar=1
c.minsizeinframeset=0.05
c.minsizeinframesetvaltype=fc
objecttree=c.frameat[0]
objecttree.framesetbar=1
objecttree.minsizeinframeset=50
gmtree=c.frameat[1]
gmtree.minsizeinframeset=50
c.maxsizeinframeset=3.2
c.maxsizeinframesetvaltype=dp

/*
d=uiz_framedivisionhorizontal(mainframe2,0.3,dp,1,xtra,2.5,dp)
d.minsizeinframeset=0.6
d.minsizeinframesetvaltype=fc
d.framesetbar=1
tabbar=d.frameat[0]
tabbar.framesetbar=0
mainframe4=d.frameat[1]
//mainframe4.framesetbar=1
f=uiz_framedivisionhorizontal(mainframe4,1,px,1,xtra)
tf=f.frameat[0]
taf=f.frameat[1]
*/
d=uiz_framedivisionhorizontal(mainframe2,1,xtra,2.5,dp)
d.minsizeinframeset=0.6
d.minsizeinframesetvaltype=fc
d.framesetbar=1
//tabbar=d.frameat[0]
//tabbar.framesetbar=0
mainframe4=d.frameat[0]
mainframe3=d.frameat[1]

f=uiz_framedivisionhorizontal(mainframe4,1,px,1,xtra)
tf=f.frameat[0]
taf=f.frameat[1]


f.framesetbar=1



//e=uiz_framedivisionvertical(mainframe3,1,xtra,1,xtra)

//log=e.frameat[0]
//log.framesetbar=1
//animation=e.frameat[1]
//*/
uiz_fixframesetpos(fset)

af=instance_create(0,0,obj_uiZ_surfaceholder)
uiz_setparent(af,taf)
af.posinframex=uiz_fill
//af.posinframey=uiz_fill
af.posinframey=px
af.posvalhtype=px;
af.depth=10000
uiz_fixgeneralpos(af)

</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///setup functionbar
functions=instance_create(0,0,obj_uiZ_functionbar)
//functionbar.framesetbar=1
uiz_setparent(functions,functionbar)
uiz_fixgeneralpos(functions)
//for(var i=0;i&lt;=100;i++){
//uiz_functionbar_additem(functions,"heldlasfasdfasdfasdfo",spr_uiZ_gear,0,0,irandom(c_white),"HELLOWafas",0,1)
//}
functions.backcolor=make_color_rgb(90,200,255)
uiz_functionbar_additem(functions,"view",spr_uiZ_view,uiz_des_func_view,uiz_des_func_view_menu,c_ltgray,0,1)
uiz_functionbar_additem(functions,"delete",spr_uiZ_delete,uiz_des_func_delete,0,c_red,0,1)
uiz_functionbar_additem(functions,"load",spr_uiZ_folder,uiz_des_func_load,0,2615021,0,1)
uiz_functionbar_additem(functions,"save",spr_uiZ_save,uiz_des_func_save,0,c_blue,0,1)
uiz_functionbar_additem(functions,"exit-save",spr_uiZ_savedoor,uiz_des_func_exitsave,0,5700696,0,1)
uiz_functionbar_additem(functions,"export",spr_uiZ_export,uiz_des_func_export,0,7040764,0,1)
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///setup uiztree
objecttreelist=instance_create(0,0,obj_uiZ_drawdslist)
objecttreelist.uselist=uizlist
objecttreelist.usesprlist=uizsprlist
objecttreelist.useimglist=uizimglist
objecttreelist.posinframex=uiz_fill
objecttreelist.posinframey=uiz_static
uiz_setparent(objecttreelist,objecttree)
uiz_fixgeneralpos(objecttreelist)
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///make step event code work
runnormalstep=1
lastsel=-1
//selobj=instance_create(0,0,obj_uiz_des_empty)
selobj=instance_create(0,0,obj_uiz_emptyobject)
//selobj=0
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///open ini and spawn in objects
gmtreelist=0;
var object,o,par;
aflist=ds_list_create()
afobjlist=ds_list_create()
afnamelist=ds_list_create()
afsprlist=ds_list_create()
afimglist=ds_list_create()
ini="uizdata.ini"
ini_open(ini)
uiobjects=ini_read_real("general","uiobjects",0)

for(var i=0;i&lt;uiobjects;i++){
if ini_read_real(string(i),"enabled",1)=1 then{
par=ini_read_real(string(i),"parent",-1)
objstr=ini_read_string(string(i),"object","obj_uiZ_testobject");
object=asset_get_index(objstr)

if object!=-1 then{
o=uiz_generalcreate(object);
o.uiobject=i
show_debug_message("[uiz:INFO] adding object: "+string(objstr)+" of index: "+string(object)+" and id: "+string(o))
//uiz_des_updateset_destroylater(o)
uiz_des_updateset(o)

if par=-1 then{
//uiz_setparent(o,af)
}else{
//parent setting code to come
}
uiz_fixgeneralpos(o)
}
}
}

ini_close()
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///set the gmtree
gmtreelist=instance_create(0,0,obj_uiZ_drawdslist)
gmtreelist.uselist=afnamelist
gmtreelist.usesprlist=afsprlist
gmtreelist.useimglist=afimglist
gmtreelist.posinframex=uiz_fill
gmtreelist.posinframey=uiz_static
gmtreelist.keepselection=1
uiz_setparent(gmtreelist,gmtree)
uiz_fixgeneralpos(gmtreelist)
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///set some other things

window_set_min_width(350)
window_set_min_width(350)
view=0
global.selobj=0
postypelist=ds_list_create()
ds_list_add(postypelist,"px")
ds_list_add(postypelist,"dp")
ds_list_add(postypelist,"fc")
postypelistlink=ds_list_create()
ds_list_add(postypelistlink,px)
ds_list_add(postypelistlink,dp)
ds_list_add(postypelistlink,fc)

uiz_destroyobject_notself(rightbarframe)
if ds_list_size(afobjlist)&gt;0 then{
afobjlist[| 0].alarm[0]=1
global.selobj=-1
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///backupscreenopen
if backupscreenopen=1 then{

if getp.kmouseover=2 then{
//select path
var path=get_save_filename("backup|*",projectname)
if path!="" then{
for(var i=string_length(path);i&gt;=0;i--){
if i=0 then{
//failed to find project folder, trow error
error="B1";
errtxt.text=path+" is an invalid path "+error
}else{
if string_char_at(path,i)="\" then{
backupfolder=string_copy(path,1,i)
psel.value=backupfolder
uiz_fixgeneralpos(psel)
break;
}
}
}
}
}

if psel.updated=1 or psel.update=1 then{
backupfolder=psel.value
}
//the button
if bcn.kmouseover=2 then{
//check if backupfolder is a valid folder

backupfolder=uiz_fixpath(backupfolder)
psel.value=backupfolder
psel.qstr=""
uiz_fixgeneralpos(psel)
valid=uiz_checkpath(backupfolder,"ERROR:")
if uiz_returnerror!="ERROR:" then{uiz_popup_ok(uiz_returnerror,"false directory",1)}
if valid=1 then{
//copy over backup
//uiz_popup_ok(uiz_executecmd(),"",0)
var path1=projectfolder
if string_char_at(path1,string_length(path1))="\" then{path1=string_copy(path1,1,string_length(path1)-1)}
var d=date_current_datetime();
var time=+string(date_get_day(d))+"-"+string(date_get_month(d))+"-"+string(date_get_year(d))+"-"+string(date_get_hour(d))+"-"+string(date_get_minute(d))+"-"+string(date_get_second(d));
var path2=string_copy(backupfolder,1,string_length(backupfolder))+"\"+projectname+"\"+string_copy(projectname,1,3)+"_"+time;
//if string_char_at(path2,string_length(path2))="\" then{path2=string_copy(path2,1,string_length(path2)-1)}
//path2=path2+"ABC"
//dbm(path2+";kj;lkj;lkj;kljl;kj","xx")
//dbm(path1,path2,'robocopy "'+path1+'" "'+path2+'" /E /COPY:DAT')
//dbm(uiz_executecmd('robocopy "'+path1+'" "'+path2+'" /E /COPY:DAT'))
var returncode=uiz_executecmd('robocopy "'+path1+'" "'+path2+'" /E /COPY:DAT')

switch(returncode){
case 0:
uiz_popup_ok("Nothing was copied: "+string(returncode),"robocopy",1)
break;
case 1:
runpop=3;
uiz_popup_ok("backup sucsessful!#backups will now be created everytime uiz makes any significant changes.#to be 100% sure, please check for yourself whether a backup has been made.","robocopy",1)
ini_open("fileinfo.ini")
ini_write_string("backup","path",backupfolder)
ini_write_string("backup","latest",time)
ini_write_string("backup","first",time)
ini_close()
uiz_destroyobject(w)
backupscreenopen=0
errtxt.text="backups have been made."
uiz_fixgeneralpos(errtxt);
break;
default:
var error="ERROR:"
if returncode&gt;&gt;1 mod 2=1 then{error+="# some extra files or directories were deteced and no files were copied."}
if returncode&gt;&gt;2 mod 2=1 then{error+="# Some mismatched files or directories were detected"}
if returncode&gt;&gt;3 mod 2=1 then{error+="# could not copy some files or directories"}
if returncode&gt;&gt;4 mod 2=1 then{error+="# No files could be copied. may be because of wrong acces privileges or an error with directories."}
if error!="ERROR:" then{uiz_popup_ok(error+"#CODE: "+string(returncode),"robocopy",1)}
break;
}

}

}
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///loadfilescreen open
if global.haswindow=id and ds_exists(loadfilelist,ds_type_list) and global.windowexists&gt;0 and instance_exists(global.windowexists) then{
//sdbm(ldlist)
if ldbut_add.kmouseover=4 then{
newfilepopup=uiz_popup_string("Enter a name for your file.
Extensions will be added automatically.","new file",1,"")
}
if newfilepopup&gt;0 and instance_exists(newfilepopup) and newfilepopup.indestroy=1 then{
var str=uiz_fixfilename(newfilepopup.str);

if str="" then{
newfilepopup=uiz_popup_string("You didn't enter anything, or you entered false characters.
Enter a name for your file.
Extensions will be added automatically.","new file",1,"")
}else{
if uiz_fileexists(projectfolder+"uiZ\"+str+".ini")=1 then{
newfilepopup=uiz_popup_string("The file you entered already exits
Enter a diffrent name for your file.
Extensions will be added automatically.","new file",1,str)
}else{
//add the file
ini_open("uizdatafile.ini")
//ini_write_string("project","loadfile",projectfolder+"uiZ\"+string(str)+".ini")
ini_write_string("project","loadfile",string(str)+".ini")
ini_close()
uiz_findfile_createfile(projectfolder+"uiZ\"+string(str)+".ini")
game_restart()
}}
}
if ldlist.keepselected&gt;-1 then{
if ldbut_load.kmouseover=4 then{
//load file
//sdbm("[uiZ:INFO] copying '"+projectfolder+"uiZ\"+string(loadfilelist[| ldlist.keepselected])+"' to '"+directory+"'")
//uiz_copyfilewin(projectfolder+"uiZ\"+string(loadfilelist[| ldlist.keepselected]),directory+"whatever.ini")
ini_open("uizdatafile.ini")
//ini_write_string("project","loadfile",projectfolder+"uiZ\"+string(loadfilelist[| ldlist.keepselected]))
//dbm("writing load to file")
ini_write_string("project","loadfile",string(loadfilelist[| ldlist.keepselected]))
ini_close()
game_restart()
}
}
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///viewmenu
if viewmenu&gt;0 and instance_exists(viewmenu)then{
//sdbm("viewmenu!",viewmenu)
if viewmenu.updated=1 then{
//sdbm("updating viewmenu")
view=clamp(viewmenu.selected,0,2)
switch(view){
case 0: uiz_framedivisionsetvalue(f,1,1,xtra)uiz_framedivisionsetvalue(f,0,0,px) uiz_setparent(af,taf) af.posvalh=f.height uiz_fixgeneralpos(af) break;
case 1: uiz_framedivisionsetvalue(f,0,1,xtra)uiz_framedivisionsetvalue(f,1,0,px) uiz_setparent(af,taf) af.posvalh=0 uiz_fixgeneralpos(af) break;
case 2: uiz_framedivisionsetvalue(f,0,1,xtra)uiz_framedivisionsetvalue(f,1,0,px) uiz_setparent(af,tf) af.posvalh=f.height uiz_fixgeneralpos(af) break;
}
uiz_fixframesetpos(fset)
}
}
if runnormalstep=1 and lastfheight!=f.height and !(view=1) then{
lastfheight=f.height
af.posvalh=f.height//tf.height+taf.height
//sdbm("setting height to:",f.height)
uiz_fixgeneralpos(af)
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>other</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>switch(runpop){
case 1:
if !instance_exists(pop) or (instance_exists(pop) and pop.destroy&gt;0) then{
//alarm[1]=1;
projectfile=get_open_filename("gm project file|*.project.gmx",game_project_name+".project.gmx")
ini_open("uizdatafile.ini")
ini_write_string("project","gmxfile",projectfile)
ini_close()
runpop=0;
alarm[7]=1;
}
break;
case 2:
if !instance_exists(pop) or (instance_exists(pop) and pop.destroy&gt;0) then{
//alarm[0]=1;
//setup file changing service
uiz_copyfilewin(working_directory+"uiz\uiZ_fileservice.exe",game_save_id+"uiZ_fileservice.exe")
uiz_copyfilewin(working_directory+"uiz\startfileservice.bat",game_save_id+"startfileservice.bat")
uiz_executecmd(game_save_id+"startfileservice.bat")
game_end()
runpop=0;
}
case 3:
if !instance_exists(pop) or (instance_exists(pop) and pop.destroy&gt;0) then{
alarm[3]=1
runpop=0;
}
break;
}

</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if runnormalstep=1 then{
if gmtreelist.sel!=-1 and gmtreelist.kmouseover=4 then{
if global.windowexists&gt;0 and instance_exists(global.windowexists) then{
uiz_destroyobject_animation(global.windowexists,uiz_exponential_in,uiz_exponential_in,uiz_exponential_in,0.1)
}
rightbar.addy=0;
gridscrollbar.scroll=0;
//uiz_des_updateset(aflist[| gmtreelist.sel])
uiz_destroyobject_notself(rightbarframe)
//dbm(afobjlist[| gmtreelist.sel])
afobjlist[| gmtreelist.sel].alarm[0]=1
global.selobj=-1
}

}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>uiz_designerend()
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>uiz_designerend()
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="64">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if runnormalstep=1 then{

if lastsel&gt;-1 then{
draw_sprite(uizsprlist[| lastsel],uizimglist[| lastsel],uiz_getmouse_x(),uiz_getmouse_y())
if mouse_check_button_released(mb_left) and point_in_rectangle(uiz_getmouse_x(),uiz_getmouse_y(),af.rx,af.ry,af.rlx,af.rly) then{
//spawn in object.
global.isbeingcreated=1
show_debug_message("[uiZ:INFO] creating object: "+string(uizlist[| lastsel]))
var object=asset_get_index(string(uizlist[| lastsel]))
//var o=instance_create(0,0,object)
objstr=object_get_name(object)
var o=uiz_generalcreate(object);
o.uiobject=uiobjects
//write to ini
ini_open(ini)
ini_write_string(string(uiobjects),"object",uizlist[| lastsel])
uiobjects++
ini_write_real("general","uiobjects",uiobjects)
ini_close();
uiz_des_updateset(o)
uiz_setparent(o,af)
uiz_fixgeneralpos(o)


gmtreelist.sel=uiobjects-1;
gmtreelist.select=uiobjects-1;
gmtreelist.selected=uiobjects-1;
gmtreelist.keepselected=uiobjects-1;
if global.windowexists&gt;0 and instance_exists(global.windowexists) then{
uiz_destroyobject_animation(global.windowexists,uiz_exponential_in,uiz_exponential_in,uiz_exponential_in,0.1)
}
//uiz_des_updateset(aflist[| gmtreelist.sel])
uiz_destroyobject_notself(rightbarframe)
//dbm(afobjlist[| gmtreelist.sel])
afobjlist[| gmtreelist.sel].alarm[0]=1
global.selobj=-1












global.isbeingcreated=0
}
}
lastsel=objecttreelist.sel
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
